# テストケースのルール

Golang のテストケースのルールをまとめます。

## テストファイルの命名

テストファイルは、テスト対象のファイル名に `_test` を付けたものにします。

例えば、`foo.go` に対するテストファイルは `foo_test.go` とします。

## テスト関数の命名

テスト関数は、`Test` で始まる名前にします。

例えば、`Foo` という関数に対するテスト関数は `TestFoo` とします。

## テストを実装すべきかどうか

テストを実装すべきかどうかは、以下の観点で判断します。

- ロジックを実装している関数については、テストを実装する
  - つまり、呼び出しのみを行っている関数については、テストを実装しない
    - 例えば、MySQL のクエリを実行する関数については、テストを実装しない

## GoMock を利用する

テストを実装する上で外部の依存関係をモック化する場合は、GoMock を利用します。

その場合、以下のように mockgen を利用してモックを生成します。

mock ファイルは mock をする対象のファイルと同じディレクトリに配置し、
名前は `*_mock.go` とします。

```go
package service

//go:generate mockgen -source=message_service.go -destination=message_service_mock.go -package=service
...
```